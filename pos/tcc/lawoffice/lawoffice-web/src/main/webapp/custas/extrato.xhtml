<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.prime.com.tr/ui"
    template="/WEB-INF/templates/template.xhtml">
    
  <ui:define name="title">Extrato</ui:define>
  
   <ui:define name="css">
 		<h:outputStylesheet name="tablesort.css" library="css"/>
   </ui:define>
  
  <ui:define name="body">
  	
  	<h:form prependId="false">
  		
  		<div id="filtros" >
			<div id="divInput">
	  			<div>
	  				<h:outputLabel value="Data Inicial:" for="dataInicial"/>
	  				<p:calendar id="dataInicial" 
	  					pattern="dd/MM/yyyy" 
	  					timeZone="GMT-2:00" 
	  					value="#{extratoMB.dataInicial}"
	  					size="10"
	  					styleClass="inputText"
	  					/>
	  			</div>
	  			<div>
	  				<h:outputLabel value="Data Final:" for="dataFinal"/>
	  				<p:calendar id="dataFinal" 
	  					pattern="dd/MM/yyyy" 
	  					timeZone="GMT-2:00" 
	  					value="#{extratoMB.dataFinal}"
	  					size="10"
	  					styleClass="inputText"	  					
	  					/>	  					  				
	  			</div>
				
				<div>
					<h:outputLabel value="Cliente: " for="cliente"/>
					<p:autoComplete id="cliente"
						value="#{extratoMB.cliente}"
						completeMethod="#{extratoMB.listarClientes}"
						var="cliente"
						itemLabel="#{cliente.nome}"
						itemValue="#{cliente}"
						converter="clienteConverter"
						styleClass="inputText"
						size="30"
						/>
				</div>
	  			
				<div style="padding-top: 15px;">
					<h:commandButton value="Pesquisar" 
						id="btnPesquisar" 
						action="#{extratoMB.pesquisarLancamentos}">
						<f:ajax render="tableCustas" 
							execute="dataInicial dataFinal cliente" 
							onevent="oneventPesquisar"/>
					</h:commandButton>										
				</div>	  			
	  						
			</div> 
			<div style="clear: both;"></div> 			
  		</div>
  		
  		<div class="divContent">
  		
  			<p:dataTable 
  				value="#{extratoMB.listaCustas}"
  				var="custa"
  				id="tableCustas"
  				styleClass="tablesorter" 
				cellspacing="1" 
				cellpadding="0" 
				border="0"
  				>
  			
					<p:column>
						<f:facet name="header">
							<h:outputText value="Data" /> 
						</f:facet>
						<h:outputText value="#{custa.lancamento.dataLancamento}" >
							<f:convertDateTime pattern="dd/MM/yyyy"/>
						</h:outputText>
						
					</p:column>  			
  			
					<p:column>
						<f:facet name="header">
							<h:outputText value="Natureza" /> 
						</f:facet>
						<h:outputText value="#{custa.natureza}" />
					</p:column>
					
					<p:column>
						<f:facet name="header">
							<h:outputText value="Colaborador" /> 
						</f:facet>
						<h:outputText value="#{custa.lancamento.colaborador.nome}" />
					</p:column>

					<p:column>
						<f:facet name="header">
							<h:outputText value="Valor" /> 
						</f:facet>
						<h:outputText value="#{custa.valor}" >
							<f:convertNumber pattern="R$ ###,###,###,##0.00"/>
						</h:outputText>
					</p:column>					
  			
  			</p:dataTable>
  		</div>
  		
	  
  	</h:form>
      
  </ui:define>
 
  <ui:define name="js">  
	<h:outputScript name="extrato.js" library="js"/>
  </ui:define>
  
</ui:composition>