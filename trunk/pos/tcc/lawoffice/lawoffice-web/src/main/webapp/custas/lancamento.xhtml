<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.prime.com.tr/ui"
    template="/WEB-INF/templates/template.xhtml">
    
	<ui:define name="title">Lançamento</ui:define>
  
   <ui:define name="css">
 		<h:outputStylesheet name="tablesort.css" library="css"/>
   </ui:define>
  
  <ui:define name="body">
    
	<h:form prependId="false">
	
		<div id="novoLacamento">
		
			<div id="dados">
			
				<div id="divInput">
				
					<div>
						<h:outputLabel value="Colaborador: " for="colaboradorID" />
							<h:selectOneMenu value="#{lancamentoMB.colaboradorID}" id="colaboradorID">
								<f:selectItems value="#{lancamentoMB.colaboradores}"
									var="colaborador" 
									itemLabel="#{colaborador.nome}"
									itemValue="#{colaborador.id}"/>
							</h:selectOneMenu>					
					</div>
					
					<div>
						<h:outputLabel value="Cliente: " for="clienteID"/>
							<h:selectOneMenu value="#{lancamentoMB.clienteID}" id="clienteID">
								<f:selectItems value="#{lancamentoMB.clientes}"
									var="cliente" 
									itemLabel="#{cliente.nome}"
									itemValue="#{cliente.id}"/>
							</h:selectOneMenu>					
					</div>
					
					<div>
						<h:outputLabel value="Natureza: " for="natureza"/>
						<h:inputText value="#{lancamentoMB.custa.natureza}" id="natureza"/>
					</div>
					
					<div>
						<h:outputLabel value="Valor: " for="valor" />
						<h:inputText value="#{lancamentoMB.custa.valor}" id="valor"/>					
					</div>
					
					<div style="padding-top: 15px;">
						<h:commandButton value="Adicionar" action="#{lancamentoMB.adicionarCusta}" id="btnAdicionar">
							<f:ajax render="tableCustas natureza valor" 
								execute="natureza valor colaboradorID clienteID" 
								onevent="oneventAddCusta" />
						</h:commandButton>
						
						<h:commandButton value="Atualizar" action="#{lancamentoMB.atualizarCusta}" id="btnSalvar">
							<f:ajax render="tableCustas natureza valor" 
								execute="natureza valor colaboradorID clienteID" 
								onevent="oneventAddCusta" />
						</h:commandButton>											
					</div>
					
				</div>
					
				<div style="clear: both;"></div>
				
		
			</div>
			
			
			<div class="divContent">
			
				<p:dataTable
					value="#{lancamentoMB.custas}" 
					var="custa"
					id="tableCustas"
					selection="#{lancamentoMB.custa}" 
					selectionMode="single"
					onRowSelectComplete="alert('aaa');" 						
					>
					
										
					<p:column sortBy="#{custa.lancamento.colaborador.nome}">
						<f:facet name="header">
							<h:outputText value="Colaborador" /> 
						</f:facet>
						<h:outputText value="#{custa.lancamento.colaborador.nome}" />
					</p:column>
								
					<p:column sortBy="#{custa.lancamento.cliente.nome}">
						<f:facet name="header">
							<h:outputText value="Cliente" /> 
						</f:facet>
						<h:outputText value="#{custa.lancamento.cliente.nome}" />
					</p:column>
					
					<p:column sortBy="#{custa.natureza}">
						<f:facet name="header">
							<h:outputText value="Natureza" /> 
						</f:facet>
						<h:outputText value="#{custa.natureza}" />
					</p:column>
					
					<p:column sortBy="#{custa.valor}">
						<f:facet name="header">
							<h:outputText value="Valor" /> 
						</f:facet>
						<h:outputText value="#{custa.valor}" >
							<f:convertNumber pattern="R$ ###,###,###,##0.00"/>
						</h:outputText>	
					</p:column>				
					
				</p:dataTable>			
			</div>
			
			<div class="divContent">
			
				<h:commandButton action="#{lancamentoMB.editarCusta}" 
					value="Editar" 
					id="btnEditar">
					<f:ajax render="natureza valor colaboradorID clienteID" execute="tableCustas"/>				
				</h:commandButton>
								
				<h:commandButton action="#{lancamentoMB.removerCusta}" 
						value="Remover" 
						id="btnRemover"
						>
					<f:ajax render="tableCustas" execute="tableCustas"/>
				</h:commandButton>
											
				<h:commandButton action="#{lancamentoMB.fecharLancamento}" 
						value="Fechar Lançamento" 
						id="btnFecharLancamento" 
						>
					<f:ajax render="tableCustas" onevent="oneventFecharLancamento"/>
				</h:commandButton>
			</div>		
			
		</div>
		
	</h:form>
	
  </ui:define>
  
  <ui:define name="js">
  	<h:outputScript name="lancamento.js" library="js"/>
  </ui:define>
  
</ui:composition>