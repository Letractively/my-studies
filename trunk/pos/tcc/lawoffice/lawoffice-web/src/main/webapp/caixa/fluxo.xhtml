<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.prime.com.tr/ui"
    template="/WEB-INF/templates/template.xhtml">
    
  <ui:define name="title">#{msg.labelFluxo}</ui:define>
  
  <ui:define name="body">    

	<h:form prependId="false">
				
		<div id="fluxo">
			
			<div id="dados">
			
					<div id="divInput">
					
						<div>
							<h:outputLabel value="#{msg.labelDataInicial}:" for="dataInicial"/>
							<p:calendar  
								id="dataInicial"
								pattern="dd/MM/yyyy" 
								value="#{fluxoMB.dataInicial}"
								size="11"
								readOnlyInputText="true"
								validator="dataValidator"
								onfocus="nofificationBar.hide()"	
							/>
						</div>
						
						<div>
							<h:outputLabel value="#{msg.labelDataFinal}:" for="dataFinal"/>
							<p:calendar   
								id="dataFinal"
								pattern="dd/MM/yyyy" 
								value="#{fluxoMB.dataFinal}"
								size="11"
								readOnlyInputText="true"
								validator="dataValidator"
								onfocus="nofificationBar.hide()"									
							/>
						</div>											
					
						<div>
							<h:outputLabel value="#{msg.labelColaborador}:" for="colaborador"/>
							<p:autoComplete id="colaborador"
								value="#{fluxoMB.colaborador}"
								completeMethod="#{fluxoMB.listarColaboradores}"
								var="colaborador"
								itemLabel="#{colaborador.nome}"
								itemValue="#{colaborador}"
								converter="colaboradorConverter"
								validator="colaboradorValidator"
								onkeypress="nofificationBar.hide()"								
								size="30"/>
						</div>			
					

													
						<div style="padding-top: 12px;">			
							<p:commandButton
								value="#{msg.btnLabelConsultar}" 
								action="#{fluxoMB.consultar}" 
								id="btnConsultar" 
								update="transacoes msg"
								oncomplete="showHideNotificationBar();showHideTable()"
								/>													
						</div>	
			
					</div>
				
					<div style="clear: both;"></div>				
				
			</div>
			
			<div class="divContent">
					
					<p:dataTable 
						value="#{fluxoMB.listTransacoes}" 
						var="transacao"
						id="transacoes"
						styleClass="table">
						
						<p:column>
							<f:facet name="header">
								<h:outputText  value="Data"/>
							</f:facet>							
							<h:outputText  value="#{transacao.dataTransacao}">
								<f:convertDateTime pattern="dd/MM/yyyy"/>
							</h:outputText>
						</p:column>
						
						<p:column>
							<f:facet name="header">
								<h:outputText  value="Tipo de Transacao"/>
							</f:facet>
							<h:outputText  value="#{transacao.tipoTransacao}"/>
						</p:column>
						
						<p:column>
							<f:facet name="header">
								<h:outputText  value="Valor"/>
							</f:facet>
							<h:outputText  value="#{transacao.valor}">
								<f:convertNumber pattern="R$ ###,###,###,##0.00"/>
							</h:outputText>
						</p:column>	
						
						<f:facet name="footer"></f:facet>						
					
					</p:dataTable>
				
			</div>
				
			<p:notificationBar position="bottom" 
				effect="slide"
				widgetVar="nofificationBar" 
				styleClass="nofificationBar">
			  	<p:messages id="msg" showDetail="true"  showSummary="true"/>
			</p:notificationBar>			
			
		</div>
		
	</h:form>
		
  </ui:define>
  
</ui:composition>